//++ Баст Добавление полей на форму Заказа покупателя

#Область ПрограммныйИнтерфейс

Процедура ДополнитьФорму(Форма) Экспорт

	ИмяФормы = Форма.ИмяФормы;

	Если ИмяФормы = "Документ.ЗаказПокупателя.Форма.ФормаДокумента" Тогда
		ДобавитьПоляВФормуЗаказаПокупателя(Форма);
	ИначеЕсли ИмяФормы = "Документ.ОплатаОтПокупателя.Форма.ФормаДокумента" 
		ИЛИ ИмяФормы = "Документ.ОплатаПоставщику.Форма.ФормаДокумента" Тогда
		ДобавитьПолеКонтактноеЛицоПослеКонтрагента(Форма);
	ИначеЕсли ИмяФормы = "Документ.ПоступлениеТоваровУслуг.Форма.ФормаДокумента" 
		ИЛИ ИмяФормы = "Документ.РеализацияТоваровУслуг.Форма.ФормаДокумента" Тогда
		ДобавитьПолеКонтактноеЛицо(Форма);
	КонецЕсли;

КонецПроцедуры

#КонецОбласти

#Область ПрограммныйИнтерфейс

Процедура ДобавитьПоляВФормуЗаказаПокупателя(Форма)

	// 1. Добавляем поле "КонтактноеЛицо" 
	ДобавитьПолеКонтактноеЛицо(Форма);
	
	// 2. Добавляем поле "Согласованная скидка" 
	ПолеСкидка = Форма.Элементы.Добавить("БК_СогласованнаяСкидка", Тип("ПолеФормы"), Форма.Элементы.ГруппаШапкаЛево);
	ПолеСкидка.Вид = ВидПоляФормы.ПолеВвода;
	ПолеСкидка.ПутьКДанным = "Объект.БК_СогласованнаяСкидка";
	ПолеСкидка.Заголовок = "Согласованная скидка, %";
	ПолеСкидка.УстановитьДействие("ПриИзменении", "БК_СогласованнаяСкидкаПриИзменении");
	
	КомандаПересчитать = Форма.Команды.Добавить("ПересчитатьТаблицу");
	КомандаПересчитать.Заголовок = "Пересчитать таблицу";
	КомандаПересчитать.Действие = "ПересчитатьТаблицу";
	
	// 3. Добавляем кнопку "Пересчитать таблицу" 
	КнопкаПересчитать = Форма.Элементы.Добавить("ПересчитатьТаблицу", Тип("КнопкаФормы"), Форма.Элементы.ГруппаШапкаЛево);
	КнопкаПересчитать.Заголовок = "Пересчитать таблицу";
	КнопкаПересчитать.ИмяКоманды = "ПересчитатьТаблицу";

КонецПроцедуры

Процедура ДобавитьПолеКонтактноеЛицо(Форма)

	ПолеКонтактноеЛицо = Форма.Элементы.Добавить("БК_КонтактноеЛицо", Тип("ПолеФормы"), Форма.Элементы.ГруппаШапкаПраво);
	ПолеКонтактноеЛицо.Вид = ВидПоляФормы.ПолеВвода;
	ПолеКонтактноеЛицо.ПутьКДанным = "Объект.БК_КонтактноеЛицо";
	ПолеКонтактноеЛицо.Заголовок = "Контактное лицо";

КонецПроцедуры

Процедура ДобавитьПолеКонтактноеЛицоПослеКонтрагента(Форма)
	
	ЭлементДоговор = Форма.Элементы.Договор;
	ПолеКонтактноеЛицо = Форма.Элементы.Вставить("БК_КонтактноеЛицо", Тип("ПолеФормы"), Форма, ЭлементДоговор);
	ПолеКонтактноеЛицо.Вид = ВидПоляФормы.ПолеВвода;
	ПолеКонтактноеЛицо.ПутьКДанным = "Объект.БК_КонтактноеЛицо";
	ПолеКонтактноеЛицо.Заголовок = "Контактное лицо";

КонецПроцедуры

#КонецОбласти

//-- Баст Конец доработки